{% extends "base.html" %}

{% block extrahead %}
{{ super() }}
<script src="//assets.adobedtm.com/5d4962a43b79/814eb6e9b4e1/launch-4bc07f1e0b0b.min.js"></script>
<!-- OneTrust Cookies Consent Notice start for nvidia.com -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true"
    type="text/javascript" charset="UTF-8" data-domain-script="3e2b62ff-7ae7-4ac5-87c8-d5949ecafff5"></script>
<script type="text/javascript">
    function OptanonWrapper() {
        var event = new Event('bannerLoaded');
        window.dispatchEvent(event);
    }
</script>
<!-- OneTrust Cookies Consent Notice end for nvidia.com -->
<script type="text/javascript" src="https://images.nvidia.com/aem-dam/Solutions/ot-js/ot-custom.js"></script>
{% endblock %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">_satellite.pageBottom();</script>
<!-- OneTrust global script start -->
<div class="hide" style="display: none;">
    <script type="text/javascript">
        (function () {
            "use strict";
            if (!window.$) {
                return;
            }

            const observer = new MutationObserver(function (mutations, mutationInstance) {
                const otPreferencePanel = document.getElementById('onetrust-pc-sdk');

                if (otPreferencePanel) {
                    $('#ot-lst-title').find('h3').attr('id', 'nv-ot-lst-title');

                    const style = document.createElement('style');
                    style.textContent = `
                                    #filter-btn-handler {
                                        display: flex;
                                        align-items: center;
                                        justify-content: center;
                                        padding: 0;
                                        position: relative;
                                    }
                                    #filter-btn-handler svg {
                                        width: 100%;
                                        height: 100%;
                                        transform: translate(-5%, -15%);
                                    }
                                `;
                    document.head.appendChild(style);

                    const replaceTags = [
                        'ot-pc-title',
                        'ot-category-title',
                        // 'ot-header-id-C0001',
                        // 'ot-header-id-C0002',
                        // 'ot-header-id-C0003',
                        // 'ot-header-id-C0004',
                        // 'nv-ot-lst-title'
                    ];
                    for (const tagId of replaceTags) {
                        replaceTag(tagId);
                    }

                    const otBanner = document.getElementById('onetrust-banner-sdk');
                    if (otBanner && navigator.globalPrivacyControl) {
                        setNvDone();
                    }
                    mutationInstance.disconnect();
                }
            });

            observer.observe(document, {
                childList: true,
                subtree: true
            });

            /**  Below function replaceTag() is used to replace h tags to p tags as per SEO recommendation **/
            const replaceTag = function (id) {
                var that = document.getElementById(id);
                if (that) {
                    var p = document.createElement('p');
                    p.setAttribute('id', that.getAttribute('id'));
                    p.setAttribute('class', that.className ? that.className : '');
                    while (that.firstChild) {
                        p.appendChild(that.firstChild);
                    }
                    that.parentNode.replaceChild(p, that);
                }
            };

            const setNvDone = function () {
                // Hide only the Accept and Reject buttons
                $('#onetrust-accept-btn-handler').hide();
                $('#onetrust-reject-all-handler').hide();

                // Make sure Manage Settings is visible
                $('#onetrust-pc-btn-handler').show();

                // Check if Done button already exists before adding
                if (!$('#nv-done-btn-handler').length) {
                    $('#onetrust-button-group').append('<button id="nv-done-btn-handler">Done</button>');

                    $('#nv-done-btn-handler').click(function () {
                        OneTrust.Close();
                    });
                }
            };
        })();
    </script>
    <style>
        .image-container {
            position: relative;
        }

        .image-credit {
            color: #ccc;
            font-size: 11px;
            line-height: 1.4em;
            position: absolute;
        }

        .image-credit.credit--dark {
            color: #333;
        }

        .image-credit.position--top-left {
            top: 12px;
            left: 15px;
        }

        .image-credit.position--top-right {
            top: 12px;
            right: 15px;
        }

        .image-credit.position--bottom-left {
            bottom: 27px;
            left: 15px;
        }

        .image-credit.position--bottom-right {
            bottom: 27px;
            right: 15px;
        }
    </style>
    <script>
        if (window.$) {
            $(document).ready(function () {
                $('.image-credit').each(function () {
                    var imageOuter = $(this).parent().parent().prev().children('.image-container').append(this);
                });
            });
        }
    </script>
</div>
<!-- OneTrust global script end -->
{% endblock %}
